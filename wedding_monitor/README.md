# 예식장 예약 모니터링 프로그램

서울대 연구공원 웨딩홀과 서울대 이라운지 예약 가능 날짜를 자동으로 모니터링하고, **신랑용/신부용 텔레그램 2개**로 동시에 알림을 받는 프로그램입니다.

## 🌟 주요 기능

- ✅ **2개 예식장 모니터링**: 연구공원 웨딩홀 + 이라운지
- ✅ **텔레그램 2개 동시 알림**: 신랑용 + 신부용 따로 설정
- ✅ **자동 예약 기능**: 연구공원 웨딩홀 자동 예약 신청
- ✅ **유연한 날짜 설정**: 기간 또는 특정 날짜 선택
- ✅ **시간대별 설정**: 시간대마다 자동예약/알림만 선택

## 📋 설치 방법

### 1. Python 설치
Python 3.8 이상이 필요합니다.
- https://www.python.org/downloads/

### 2. 필요한 패키지 설치

```bash
cd wedding_monitor
pip install -r requirements.txt
```

### 3. Chrome 브라우저 설치
Selenium이 Chrome을 사용합니다.
- https://www.google.com/chrome/

## 🤖 텔레그램 봇 설정 (신랑용 + 신부용 2개)

### 신랑용 텔레그램 봇 만들기

#### 1단계: BotFather에게 봇 생성 요청

1. 텔레그램 앱 열기
2. 검색창에 `@BotFather` 입력
3. `/start` 입력
4. `/newbot` 입력
5. 봇 이름 입력 (예: `신랑 웨딩알림`)
6. 봇 사용자명 입력 (예: `groom_wedding_alert_bot`)
   - 반드시 `_bot`으로 끝나야 함
7. **Bot Token 복사 저장** (예: `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`)

#### 2단계: Chat ID 얻기

1. 검색창에 `@userinfobot` 입력
2. `/start` 입력
3. **Chat ID 복사 저장** (예: `123456789`)

### 신부용 텔레그램 봇 만들기

위와 동일한 방법으로 신부용 봇도 생성합니다.
- 봇 이름: `신부 웨딩알림`
- 사용자명: `bride_wedding_alert_bot`
- Bot Token과 Chat ID 각각 저장

### 테스트 (선택사항)

두 봇이 제대로 작동하는지 테스트:

1. 각 봇 검색 (예: `@groom_wedding_alert_bot`)
2. `/start` 입력
3. 봇과의 대화방 유지

## 🔧 예약 정보 설정

`auto_reservation.py` 파일을 열어서 예약 정보를 수정하세요:

```python
RESERVATION_INFO = {
    # 신랑 정보
    "groom_name": "홍길동",           # ← 실제 이름으로 변경
    "groom_tel": "010-1234-5678",    # ← 실제 전화번호로 변경
    "groom_email": "groom@email.com", # ← 실제 이메일로 변경

    # 신부 정보
    "bride_name": "김영희",           # ← 실제 이름으로 변경
    "bride_tel": "010-5678-1234",    # ← 실제 전화번호로 변경
    "bride_email": "bride@email.com", # ← 실제 이메일로 변경

    # 예상 인원
    "expected_people": "300~400명",   # ← 선택: "250~300명" / "300~400명" / "400명 이상"

    # 기타 문의사항
    "etc_message": "예약 확인 부탁드립니다."  # ← 선택사항
}
```

## 🚀 사용 방법

### 1. 프로그램 실행

```bash
cd wedding_monitor
python main.py
```

### 2. GUI 설정

#### 📅 날짜 모니터링 설정

**방법 1: 기간으로 모니터링**
- `기간 설정 사용` 체크
- 시작일/종료일 선택
- 확인 요일 선택 (토요일만/일요일만/토일 둘다)

**방법 2: 특정 날짜만 모니터링**
- `특정 날짜 사용` 체크
- 날짜 입력 (예: `2026-11-29, 2026-03-04, 2026-06-08`)

**※ 두 방법 동시 사용 가능**

#### ⏰ 시간대별 동작 설정

**연구공원 웨딩홀** (각 시간대마다 선택)
- ✅ 체크박스: 해당 시간대 모니터링 여부
- 🔘 알림+자동예약: 예약 가능 시 자동으로 예약 신청
- 🔘 알림만: 예약 가능 알림만 (수동 예약)

**이라운지** (알림만 가능)
- ✅ 체크박스만 선택

#### 🔔 알림 설정 (텔레그램 2개)

**신랑용 텔레그램**
- Bot Token 입력
- Chat ID 입력

**신부용 텔레그램**
- Bot Token 입력
- Chat ID 입력

**확인 주기**
- 기본값: 1시간마다
- 원하는 시간으로 변경 가능

### 3. 모니터링 시작

1. `설정 저장` 버튼 클릭 (설정을 config.json에 저장)
2. `시작하기` 버튼 클릭
3. PC 켜놓기 (절전 모드 해제)

### 4. 알림 확인

- 예약 가능 발견 시 **신랑용/신부용 텔레그램 2개 모두**에 알림 전송
- 자동 예약 시도 시 진행 상황 알림
- 예약 성공/실패 결과 알림

## 📱 알림 예시

### 신랑용 텔레그램 알림

```
👰‍♂️ [신랑용 알림]

━━━━━━━━━━━━━━━━
🔔 예약 가능 발견!

📍 서울대 연구공원 웨딩홀
📅 2026년 11월 01일 (일)
⏰ 오전 11시

상태 변경: 예약완료 → 예약가능

발견 시각: 2025-11-08 14:23:15
━━━━━━━━━━━━━━━━
```

### 신부용 텔레그램 알림

```
👰‍♀️ [신부용 알림]

━━━━━━━━━━━━━━━━
🔔 예약 가능 발견!

📍 서울대 연구공원 웨딩홀
📅 2026년 11월 01일 (일)
⏰ 오전 11시

상태 변경: 예약완료 → 예약가능

발견 시각: 2025-11-08 14:23:15
━━━━━━━━━━━━━━━━
```

두 텔레그램 모두 동일한 알림을 **동시에** 받습니다!

## 📁 파일 구조

```
wedding_monitor/
├── main.py                    # GUI 메인 프로그램 (여기서 실행!)
├── wedding_checker.py         # 예약 확인 로직
├── auto_reservation.py        # 자동 예약 기능 (예약 정보 수정)
├── notification_manager.py    # 텔레그램 2개 알림 관리
├── config.json               # 사용자 설정 (자동 생성)
├── wedding_data.json         # 예약 현황 데이터 (자동 생성)
├── requirements.txt          # 필요 패키지
└── README.md                 # 이 문서
```

## ⚠️ 주의사항

### 법적/윤리적 고려사항

1. **자동 예약은 "신청"만 가능**
   - 계약금 입금 후 직원 확인 필요
   - 완전 자동 확정 예약 불가능

2. **사이트 부하 최소화**
   - 1시간마다 확인 (과도한 요청 방지)
   - 예약 신청은 실제 의사가 있을 때만

3. **개인정보 보호**
   - 텔레그램 Bot Token 노출 주의
   - config.json 파일 타인 공유 금지

### 기술적 제약사항

1. **PC를 계속 켜놓아야 함**
   - 절전 모드 해제 권장
   - 또는 PythonAnywhere 같은 클라우드 사용

2. **네트워크 연결 필수**

3. **사이트 구조 변경 시 수정 필요**
   - 예식장 사이트가 업데이트되면 코드 수정 필요

## 🔧 문제 해결

### 텔레그램 알림이 안 와요

1. Bot Token과 Chat ID가 정확한지 확인
2. 봇과의 대화방이 열려있는지 확인 (`/start` 입력)
3. 인터넷 연결 확인

### 크롤링이 안 돼요

1. Chrome 브라우저 설치 확인
2. ChromeDriver 자동 설치 대기 (처음 실행 시)
3. 인터넷 연결 확인

### 자동 예약이 실패해요

1. `auto_reservation.py`의 예약 정보 확인
2. 실제로 예약 가능한 날짜인지 확인
3. 다른 사람이 먼저 예약했을 가능성

## 🎯 예상 결과

### 최상의 시나리오

```
1. 예약 가능 발견 (14:23:15)
   → 신랑용/신부용 텔레그램 알림 전송

2. 자동 예약 시도 (14:23:20)
   → 진행 상황 알림 전송

3. 예약 신청 완료 (14:23:35)
   → 성공 알림 전송 (신랑용/신부용 모두)

4. 예식장 전화 연락 대기

5. 계약금 입금 후 예약 확정
```

## 📞 지원

- 버그 리포트: GitHub Issues
- 질문: GitHub Discussions

## 📄 라이선스

MIT License

---

**⚠️ 중요: 예약 정보(`auto_reservation.py`)와 텔레그램 설정을 먼저 확인하세요!**

행복한 결혼 준비 되세요! 💒💐
